<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.company.manager.user.service.impl.manUserMapper">
 <!-- 회원 전체 조회 -->
 <select id="userList" parameterType="com.company.manager.user.userVO" resultType="com.company.manager.user.userVO"> 
 	SELECT USERS.*, MENTOR.MENTOR_CAREER_CERTIFICATE
	FROM USERS
	JOIN MENTOR ON USERS.ID = MENTOR.ID
 </select>
 <!-- 페이징 처리후 게시글 조회 -->
 <select id="selectBoard" resultType="com.company.manager.user.userVO">
 SELECT * FROM (
				SELECT ROWNUM RN, A.* 
				FROM (SELECT * 
						FROM V_USERS
						ORDER BY LOG_DATE DESC 
						) A
				)
	WHERE RN BETWEEN #{start} AND #{end}
 </select>
 <!-- 총 게시글 갯수 출력 -->
 <select id ="countBoard" resultType="int">
 	SELECT COUNT(*) FROM V_USERS <!-- VIEW 사용 -->
 </select>
 <!-- 회원 단건 조회 -->
 <select id="getUserList" parameterType="com.company.manager.user.userVO" resultType="com.company.manager.user.userVO">
 	SELECT USERS.*, MENTOR.MENTOR_CAREER_CERTIFICATE
	FROM USERS
	JOIN MENTOR ON USERS.ID = MENTOR.ID
	WHERE USERS.ID = #{id}
 </select>
 <!-- 회원 수정 -->
 <update id="updateUser" parameterType="com.company.manager.user.userVO">
 	UPDATE USERS SET(  PHONENUM = #{phonenum}
 					   ,ADDRESS = #{address}	
 					   ,EMAIL = #{email}
 					   )			
 	WHERE ID = #{id}
 </update>
 <!-- 회원 삭제 -->
 <delete id="deleteUser" parameterType="com.company.manager.user.userVO">
 	DELETE FROM USERS 
 	WHERE ID = #{id}
 </delete>
 <!-- 회원 승급 -->
 <update id="authUser" parameterType="com.company.manager.user.userVO">
 	UPDATE USERS SET AUTH = 'MENTOR' 
 	WHERE ID = #{id}
 </update>
 
 </mapper>
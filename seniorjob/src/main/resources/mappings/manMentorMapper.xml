<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.company.manager.mentor.service.impl.manMentorMapper">
<!-- 멘토 전체 조회 -->
 <select id="mentorList" parameterType="mentorVO" resultType="mentorVO"> 
 	SELECT MENTOR.ID, USERS.NAME, USERS.EMAIL, USERS.ADDRESS, USERS.PHONENUM
 	FROM MENTOR
 	JOIN USERS ON USERS.ID = MENTOR.ID
 </select>
 <!-- 페이징 처리후 게시글 조회 -->
 <select id="selectBoard" resultType="mentorVO">
 SELECT * FROM (
				SELECT ROWNUM RN, A.* 
				FROM (SELECT * 
						FROM MENTOR
						ORDER BY MENTOR_DATE DESC 
						) A
				)
	WHERE RN BETWEEN #{start} AND #{end}
 </select>
 <!-- 총 게시글 갯수 출력 -->
 <select id ="countBoard" resultType="int">
 	SELECT COUNT(*) FROM MENTOR
 </select>
 <!-- 멘토 단건 조회 -->
 <select id="getMentorList" parameterType="mentorVO" resultType="mentorVO">
 	SELECT MENTOR.ID, USERS.NAME, USERS.EMAIL, USERS.ADDRESS, USERS.PHONENUM
 	FROM MENTOR
 	JOIN USERS ON USERS.ID = MENTOR.ID
	WHERE USERS.ID = #{id}
 </select>
 <!-- 멘토 수정 -->
 <update id="updateMentor" parameterType="mentorVO">
 	UPDATE MENTOR SET(  NAME = #{name}
 					   ,PHONENUM = #{phonenum}
 					   ,ADDRESS = #{address}	
 					   ,EMAIL = #{email}
 					   )			
 	WHERE ID = #{id}
 </update>
 <!-- 회원으로 권한변경 -->
 <update id="authMentor" parameterType="mentorVO">
 	UPDATE MENTOR SET AUTH = 'USER' 
 	WHERE MENTOR_ID = #{memtor_id}
 </update>

 </mapper>
 